<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
	</head>
	<body ng-app="namalArchApp" ng-controller="namalArchCtrl">
		<h1>Callback parameters</h1>
		<ul>
			<li ng-repeat="(key,value) in params">{{key}} : {{value}}</li>
		</ul>
		<script>
/*
	if ?get=toto do :
	.module(..).config(['$locationProvider', function($locationProvider) {
		$locationProvider.html5Mode({
			enabled: true,
			requireBase: false
		});
	}]).controller(..)

*/
			//source : https://blog.nraboy.com/2015/03/using-oauth-2-0-in-your-web-browser-with-angularjs/
			function parse(){
				var callbackResponse = (document.URL).split("#")[1];
				var responseParameters = (callbackResponse).split("&");
				var parameterMap = {};
				for(var i = 0; i < responseParameters.length; i++) {
					parameterMap[responseParameters[i].split("=")[0]] = responseParameters[i].split("=")[1];
				}
				return parameterMap;
			}

			angular.module('namalArchApp', []).controller("namalArchCtrl",function($scope,$location){
				$scope.params=parse();
			});
		</script>
	</body>
</html>
